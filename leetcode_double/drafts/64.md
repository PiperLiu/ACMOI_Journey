
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨ï¼ˆäºŒåˆ†+å‰ç¼€å’Œé¢„å¤„ç†ï¼‰](#ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨äºŒåˆ†å‰ç¼€å’Œé¢„å¤„ç†)
- [èœ¡çƒ›ä¹‹é—´çš„ç›˜å­ï¼ˆå­—ç¬¦ä¸²æœç´¢ï¼‰](#èœ¡çƒ›ä¹‹é—´çš„ç›˜å­å­—ç¬¦ä¸²æœç´¢)
- [æ£‹ç›˜ä¸Šæœ‰æ•ˆç§»åŠ¨ç»„åˆçš„æ•°ç›®ï¼ˆæ¨¡æ‹Ÿ+é€’å½’ï¼‰](#æ£‹ç›˜ä¸Šæœ‰æ•ˆç§»åŠ¨ç»„åˆçš„æ•°ç›®æ¨¡æ‹Ÿé€’å½’)

<!-- /code_chunk_output -->

è¿Ÿåˆ°äº†10åˆ†é’Ÿã€‚

T2 ç›´æ¥æ²¡æ€è·¯ã€‚

T3 ç½šæ—¶ä¸¤æ¬¡ï¼Œè¿˜æ˜¯è„‘ä¸­æ¨¡å‹ä¸æ˜æ™°æ‰€è‡´ã€‚è¿˜åº”åŠ å¼ºå¤§è„‘çš„è®­ç»ƒã€‚

T4 æ€»è§‰å¾—èƒ½åšå‡ºæ¥ï¼Œå†™èµ·æ¥åˆè§‰å¾—å¤ªéº»çƒ¦ï¼Œå¾ˆç´¯äº†ï¼Œé‚æ”¾å¼ƒã€‚

### ä¸¤ä¸ªæœ€å¥½çš„ä¸é‡å æ´»åŠ¨ï¼ˆäºŒåˆ†+å‰ç¼€å’Œé¢„å¤„ç†ï¼‰

![](./images/2021103101.png)

```cpp
// 1e5 æ—¶é—´å¤æ‚åº¦
// nlogn äºŒåˆ†
// æšä¸¾å³ä¾§åŒºé—´ï¼ŒæŒ‰ç…§åŒºé—´å³ç«¯ç‚¹æ’åº
// é¢„å¤„ç†å¥½å‰ i ä¸ªåŒºé—´çš„æœ€å¤§å€¼ f[i]
// äºŒåˆ†çš„è¯ï¼Œåˆ™æ˜¯å›ºå®šäº†å³åŒºé—´ï¼Œæ‰¾å…è®¸å†…çš„æœ€å³çš„å·¦åŒºé—´ i
class Solution {
public:
    int maxTwoEvents(vector<vector<int>>& q) {
        int n = q.size();
        vector<int> p(n);
        for (int i = 0; i < n; ++ i) p[i] = i;
        sort(p.begin(), p.end(), [&](int a, int b) {
            return q[a][1] < q[b][1];
        });
        vector<int> f(n);
        f[0] = q[p[0]][2];
        for (int i = 1; i < n; ++ i)
            f[i] = max(f[i - 1], q[p[i]][2]);
        
        int res = 0;
        for (auto& t: q)
        {
            int l = 0, r = n - 1;
            while (l < r)
            {
                int mid = l + r + 1 >> 1;
                if (q[p[mid]][1] < t[0]) l = mid;
                else r = mid - 1;
            }
            int s = t[2];
            if (q[p[r]][1] < t[0]) s += f[r];
            res = max(res, s);
        }
        return res;
    }
};
```

**ç»éªŒï¼š**
- ä¸€èˆ¬ä¸è¦å¯¹ `vector<vector<T>>` ç›´æ¥æ’åºï¼Œä¼šè¶…æ—¶ï¼Œå¯ä»¥å¯¹ä¸‹æ ‡æ’åº

### èœ¡çƒ›ä¹‹é—´çš„ç›˜å­ï¼ˆå­—ç¬¦ä¸²æœç´¢ï¼‰

![](./images/2021103102.png)

```cpp
class Solution {
public:
    vector<int> platesBetweenCandles(string s, vector<vector<int>>& queries) {
        int n = s.size();
        vector<int> l(n, -1), r(n, n);
        vector<int> sum(n + 1, 0);

        int near = -1;
        for (int i = 0; i < n; ++ i)
        {
            auto c = s[i];
            l[i] = near;
            if (c == '|') near = i, l[i] = near;  // è¿™é‡Œè¦æ›´æ–° l[i]
        }

        near = n;
        for (int i = n-1; i >=0; -- i)
        {
            auto c = s[i];
            r[i] = near;
            if (c == '|') near = i, r[i] = near;
        }
        
        for (int i = 1; i <= n; ++ i)
        {
            if (s[i - 1] == '*') sum[i] = sum[i - 1] + 1;
            else sum[i] = sum[i - 1];
        }

        vector<int> ans;
        for (auto&& q: queries)
        {
            int i = q[0], j = q[1];
            if (i < n && l[i] < q[0]) i = r[i] + 1;  // ç›´æ¥è·³åˆ°æœ‰æ …æ çš„åœ°æ–¹
            if (j >= 0 && r[j] > q[1]) j = l[j] - 1;
            if (i < n && j >= 0) ans.push_back(max(0, sum[j + 1] - sum[i]));
            else ans.push_back(0);
        }

        return ans;
    }
};
```

### æ£‹ç›˜ä¸Šæœ‰æ•ˆç§»åŠ¨ç»„åˆçš„æ•°ç›®ï¼ˆæ¨¡æ‹Ÿ+é€’å½’ï¼‰

![](./images/2021103103.png)

```cpp
// å¯ä»¥ç”¨æš´æœ
// 
class Solution {
public:
    int n;
    vector<string> pc;  // å„ä¸ªæ£‹å­ç§ç±»
    vector<vector<int>> pt;  // å„ä¸ªæ£‹å­ä½ç½®
    int dx[8] = {-1, -1, 0, 1, 1, 1, 0, -1};  // ğŸ‘ˆå¼€å§‹ï¼Œé¡ºæ—¶é’ˆ
    int dy[8] = {0, 1, 1, 1, 0, -1, -1, -1};
    vector<vector<int>> path;
    int ans = 0;
    int p[5][2];  // åœ¨ check ä¸­è®°å½•ä½ç½®

    bool check() {  // æ£€æŸ¥è¯¥æ–¹æ¡ˆç»„åˆä¸­æœ‰æ²¡æœ‰å†²çª
        for (int i = 0; i < n; i ++ ) {
            p[i][0] = pt[i][0];
            p[i][1] = pt[i][1];
        }

        for (int i = 1; ; i ++ ) {  // æ¨¡æ‹Ÿæ¯ä¸€æ—¶åˆ»
            bool flag = false;
            for (int j = 0; j < n; j ++ ) {
                int d = path[j][0], t = path[j][1];
                if (i <= t) {
                    flag = true;
                    p[j][0] += dx[d];
                    p[j][1] += dy[d];
                }
            }
            if (!flag) break;  // æ²¡æœ‰æ£‹å­ç§»åŠ¨

            for (int j = 0; j < n; j ++ )
                for (int k = j + 1; k < n; k ++ )
                    if (p[j][0] == p[k][0] && p[j][1] == p[k][1])
                        return false;
        }

        return true;
    }

    void dfs(int u) {
        if (u == n) {
            if (check()) ans ++ ;
            return;
        }

        // æ£‹å­ u å¯èƒ½ä¸èµ°
        path.push_back({0, 0});  // {æ–¹å‘, é•¿åº¦}
        dfs(u + 1);
        path.pop_back();

        // æ£‹å­ u å¯èƒ½èµ°å…¶ä»–æ–¹å‘å…¶ä»–æ­¥é•¿
        for (int i = 0; i < 8; i ++ ) {  // å¯¹äºæ¯ä¸ªæ–¹å‘
            string& s = pc[u];
            if (s == "rook" && i % 2) continue;
            if (s == "bishop" && i % 2 == 0) continue;
            int x = pt[u][0], y = pt[u][1];
            for (int j = 1; ; j ++ ) {
                x += dx[i], y += dy[i];
                if (x < 1 || x > 8 || y < 1 || y > 8) break;
                path.push_back({i, j});
                dfs(u + 1);
                path.pop_back();
            }
        }
    }

    int countCombinations(vector<string>& pieces, vector<vector<int>>& positions) {
        pc = pieces, pt = positions;
        n = pc.size();
        dfs(0);  // ä»ç¬¬ 0 ä¸ªæ£‹å­å¼€å§‹é€’å½’
        return ans;
    }
};
```
