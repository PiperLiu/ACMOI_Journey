<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1987. 粉刷栅栏（差分+离散化）](#1987-粉刷栅栏差分离散化)

<!-- /code_chunk_output -->

### 1987. 粉刷栅栏（差分+离散化）

农夫约翰发明了一种绝妙的方法来粉刷牛棚旁边的长栅栏（把栅栏想象成一维的数轴）。

他只需要在他最喜欢的奶牛贝茜身上挂一个刷子，然后在一旁悠闲的喝凉水就行了。

贝茜沿着栅栏来回走动时，会将她走过的栅栏部分涂上油漆。

贝茜从栅栏上的位置 $0$ 处开始，共进行 $N$ 次移动。

移动可能形如 `10 L`，表示向左移动 $10$ 单位距离，也可能形如 `15 R`，表示向右移动 $15$ 单位距离。

给定贝茜的 $N$ 次移动列表，约翰想知道至少被涂抹了 $2$ 层油漆的区域的总长度。

整个行进过程中，贝茜距离出发地的距离不会超过 $10^9$。

<h4>输入格式</h4>

第一行包含一个整数 $N$。

接下来 $N$ 行，每一行包含一个行动指令，诸如 `10 L` 或 `15 R`。

<h4>输出格式</h4>

输出至少被涂抹了 $2$ 层油漆的区域的总长度。

<h4>数据范围</h4>

- $1 \le N \le 10^5$
- 整个行进过程中，贝茜距离出发地的距离不会超过 $10^9$。
- 每次指令移动距离的取值范围是 $[1,2 \times 10^9]$。

<h4>输入样例：</h4>

```
6
2 R
6 L
1 R
8 L
1 R
2 R
```

<h4>输出样例：</h4>

```
6
```

<h4>样例解释</h4>

共有 $6$ 单位长度的区域至少被涂抹 $2$ 层油漆。

这些区域为 $(-11,-8), (-4,-3), (0,2)$。

```cpp
/**
 * 差分记录变化
 * 数值大于等于 2 的区域长度加进 ans
 */
#include <iostream>
#include <cstring>
#include <algorithm>
#include <map>
using namespace std;

map<int, int> diff;

int main()
{
    int n;
    cin >> n;
    int x = 0;
    for (int i = 0; i < n; ++ i)
    {
        char o;
        int d;
        cin >> d >> o;
        if (o == 'R') d = - d;
        int newx = x + d;
        diff[min(newx, x)] ++ ;
        diff[max(newx, x)] -- ; 
        x = newx;
    }

    // 差分转数值
    int ans = 0;
    int s = 0, p = -2e9;
    for (auto&& [k, v]: diff)
    {
        if (s > 1) ans += (k - p);
        s = s + v;
        p = k;
    }
    
    cout << ans << endl;
}
```
