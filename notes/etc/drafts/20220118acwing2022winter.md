<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [1934. 贝茜放慢脚步（二路归并）](#1934-贝茜放慢脚步二路归并)

<!-- /code_chunk_output -->

### 1934. 贝茜放慢脚步（二路归并）

奶牛贝茜正在参加冬季哞林匹克运动会的越野滑雪比赛。

她以每秒 $1$ 米的速度出发。

但是，随着时间的推移，她变得越来越疲倦，她开始放慢脚步。

每次放慢脚步，贝茜的速度都会降低：减速一次后，她以每秒 $1/2$ 米的速度移动，减速两次后，则以每秒 $1/3$ 米的速度移动，依此类推。

你将被告知何时何地贝茜会减速。

当减速信息格式为：

```
T 17
```

意味着，贝茜在某个时间点减速，本例表示比赛开始第 $17$ 秒贝茜减速。

当减速信息格式为：

```
D 10
```

意味着，贝茜在某个地点减速，本例表示在行进 $10$ 米处减速。

给定 $N$ 个减速信息，请计算贝茜滑完一千米需要多少秒。

将你的答案四舍五入到最接近的整数（ $0.5$ 向上舍入为 $1$）。

<h4>输入格式</h4>

第一行包含整数 $N$。

接下来 $N$ 行，每行描述一个减速信息，格式为 `T x` 或 `D x`。

无论哪种情况，$x$ 都是一个整数，保证所有减速都在贝茜滑完一千米前发生。

可能同时发生多次减速，那么这会使得贝茜的速度一下子变慢很多。

所有减速信息不一定按顺序给出。

<h4>输出格式</h4>

输出贝茜滑完一千米所需的总时间。

<h4>数据范围</h4>

$1 \le N \le 10000$

<h4>输入样例：</h4>

```
2
T 30
D 10
```

<h4>输出样例：</h4>

```
2970
```

<h4>样例解释</h4>

贝茜以每秒 $1$ 米的速度跑完前 $10$ 米，耗时 $10$ 秒。

然后她减速到每秒 $1/2$ 米，接下来的 $10$ 米要花 $20$ 秒。

然后她在第 $30$ 秒时，再次减速到每秒 $1/3$ 米。

滑完剩下的 $980$ 米需要 $980 \times 3=2940$ 秒。

因此，总时间是 $10+20+2940=2970$ 秒。

```cpp
/**
 * 说白了就是用双指针写二路归并
 * 下一个减速位置是 a[i] 下一个减速时间是 b[j]
 * v 是速度的倒数
 * 当前走过的距离是 s 走过的时间是 t
 * (a[i] - s) * v 和 b[j] - t 谁小，说明先到哪个减速点
 */
#include <iostream>
#include <cstring>
#include <algorithm>
using namespace std;

int n;
vector<int> a, b;

int main()
{
    scanf("%d", &n);
    char str[2];
    int x;
    for (int i = 0; i < n; ++ i)
    {
        scanf("%s%d", str, &x);
        if (*str == 'D') a.push_back(x);
        else b.push_back(x);
    }
    
    // 题目保证所有减速都在贝茜滑完一千米前发生，用 a.push_back(1000) 确认完成时间
    a.push_back(1000);
    
    sort(a.begin(), a.end());
    sort(b.begin(), b.end());
    
    // 双指针实现二路归并
    double t = 0, s = 0, v = 1;
    int i = 0, j = 0;
    while (i < a.size() || j < b.size())
    if (j == b.size() || i < a.size() && (a[i] - s) * v < b[j] - t)
    {
        t += (a[i] - s) * v;
        s = a[i];
        v ++ ;
        i ++ ;
    }
    else
    {
        s += (b[j] - t) / v;
        t = b[j];
        v ++ ;
        j ++ ;
    }
    
    printf("%.0lf\n", t);
}
```
