
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [5194. å¾—åˆ°ç›®æ ‡å€¼çš„æœ€å°‘è¡ŒåŠ¨æ¬¡æ•°ï¼ˆè´ªå¿ƒ+é€†å‘æ€ç»´ï¼‰](#5194-å¾—åˆ°ç›®æ ‡å€¼çš„æœ€å°‘è¡ŒåŠ¨æ¬¡æ•°è´ªå¿ƒé€†å‘æ€ç»´)
- [5982. è§£å†³æ™ºåŠ›é—®é¢˜ï¼ˆå€’åºDPåˆ·è¡¨æ³•/æ­£åºDPæŸ¥è¡¨æ³•ï¼‰](#5982-è§£å†³æ™ºåŠ›é—®é¢˜å€’åºdpåˆ·è¡¨æ³•æ­£åºdpæŸ¥è¡¨æ³•)
- [5983. åŒæ—¶è¿è¡Œ N å°ç”µè„‘çš„æœ€é•¿æ—¶é—´ï¼ˆå‡è®¾æ€ç»´+äºŒåˆ†/è´ªå¿ƒï¼‰](#5983-åŒæ—¶è¿è¡Œ-n-å°ç”µè„‘çš„æœ€é•¿æ—¶é—´å‡è®¾æ€ç»´äºŒåˆ†è´ªå¿ƒ)

<!-- /code_chunk_output -->

ä½è°·ã€‚å¾ˆå¤±è½ã€‚åŠªåŠ›äº†åŠå¹´å¤šï¼Œæ¯«æ— æˆæ•ˆã€‚æ€ç»´å¤ªçª„äº†ã€‚ T2 å®Œå…¨æƒ³ä¸åˆ°é€†å‘æ€ç»´ï¼Œå…¶å®æ˜¯å¾ˆç®€å•çš„äº‹ã€‚ä½†è‡³å°‘æœ‰ç»éªŒäº†ï¼šä»¥å T2 å®Œå…¨ä¸è‡³äºç”¨ bfs åšã€‚ T3 ä¸çŸ¥é“é”™åœ¨å“ªã€‚

çœ‹æ¥åªè¦æ˜¯è´ªå¿ƒé¢˜æˆ‘å°±ä¸ä¼šã€‚

### 5194. å¾—åˆ°ç›®æ ‡å€¼çš„æœ€å°‘è¡ŒåŠ¨æ¬¡æ•°ï¼ˆè´ªå¿ƒ+é€†å‘æ€ç»´ï¼‰

![](./images/leetcode-cn.com_contest_weekly-contest-276_problems_minimum-moves-to-reach-target-score_.png)

æˆ‘çš„è¶…æ—¶ä»£ç ï¼š
```cpp
#define fi first
#define se second

typedef pair<int, int> PII;  // value, cnt2
typedef pair<int, pair<int, int>> PIII;  // dist, {count2, value}

class Solution {
public:
    int minMoves(int target, int maxDoubles) {
        // set<PII> st;
        priority_queue<PIII, vector<PIII>, greater<PIII>> pq;
        pq.push({0, {0, 1}});
        // st.insert({1, 0});
        while (pq.size())
        {
            auto t = pq.top();
            pq.pop();
            int dist = t.fi, cnt2 = t.se.fi, value = t.se.se;
            // printf("%d %d %dok\n", dist, cnt2, value);
            if (value > target) continue;
            if (value == target) return dist;
            if (cnt2 == maxDoubles)
            {
                // printf("%d %d %d\n", dist, -cnt2, value * 2);
                pq.push({dist + (target - value), {-cnt2, target}});
            }
            else
            {
                // if (!st.count({value * 2, cnt2}))
                // {
                // printf("%d %d %d\n", dist, cnt2, value * 2);
                    pq.push({dist + 1, {cnt2 + 1, value * 2}});
                    // if (value * 2 != target) st.insert({value * 2, cnt2});
                // }
                // if (!st.count({value + 1, cnt2}))
                // {
                // printf("%d %d %d\n", dist, cnt2, value + 1);
                    pq.push({dist + 1, {cnt2, value + 1}});
                    // if (value + 1 != target) st.insert({value + 1, cnt2});
                // }
            }
        }
        
        return -1;
        
        // int cnt1 = 0, cnt2 = 0;
        // function<bool(int)> dfs = [&](int value) -> bool {
        //     if (value > target) return false;
        //     if (value == target) return true;
        //     if (cnt2 < maxDoubles)
        //     {
        //         cnt2 ++ ;
        //         if (dfs(value * 2)) return true;
        //         cnt2 -- ;
        //     }
        //     else
        //     {
        //         cnt1 ++ ;
        //         if (dfs(value + 1)) return true;
        //         cnt1 -- ;
        //     }
        //     return false;
        // };
        
        // dfs(1);
        // return cnt1 + cnt2;
    }
};
```

**æ­£ç¡®æ€è·¯ï¼š**

```cpp
class Solution {
public:
    int minMoves(int target, int maxDoubles) {
        /**
         * è´ªå¿ƒï¼šæŠŠä¹˜ä»¥äºŒç•™åˆ°æœ€åï¼Œè¿™æ ·æ­¥æ•°è‚¯å®šæœ€å°
         * æ‰€ä»¥é€†å‘æ€ç»´ï¼Œæ˜¯å¥‡æ•°åˆ™å‡ä¸€ï¼Œå¶æ•°åˆ™é™¤ä»¥äºŒ
         * ä¸èƒ½é™¤äº†å‰©ä¸‹çš„éƒ½è¦åŠ ä¸€
         * æ¢å¥è¯è¯´ï¼Œè¿™é¢˜ä¿è¯äº†ä¹˜ä»¥äºŒè¿™ä¸ªè¿ç®—èƒ½å‘æŒ¥æœ€å¤§æ•ˆç›Š
         */
         int ans = 0;
         while (target != 1)
         {
             if (maxDoubles > 0)
             {
                if (target % 2)
                {
                    target -- ;
                    ans += 1;
                }
                else
                {
                    target /= 2;
                    ans += 1;
                    maxDoubles -- ;
                }
             }
             else
             {
                 ans += target - 1;
                 break;
             }
         }
         return ans;
    }
};
```

### 5982. è§£å†³æ™ºåŠ›é—®é¢˜ï¼ˆå€’åºDPåˆ·è¡¨æ³•/æ­£åºDPæŸ¥è¡¨æ³•ï¼‰

![](./images/leetcode-cn.com_contest_weekly-contest-276_problems_solving-questions-with-brainpower_.png)

æˆ‘çš„é”™è¯¯ä»£ç ï¼š

```cpp
#define fi first
#define se second

class Solution {
public:
    long long mostPoints(vector<vector<int>>& questions) {
        int n = questions.size();
        vector<pair<long long, int>> dp(n + 1, {0L, 0});
        
        function<pair<long long, int>(int)> dfs = [&](int m) -> pair<long long, int>
        {
            if (m == 0) return {0L, 0};
            if (dp[m].se != 0) return dp[m];
            auto last = dfs(m - 1);
            long long maxv = last.fi;
            int step = last.se;
            if (step <= 0)
            {
                dp[m] = {maxv + questions[m - 1][0], questions[m - 1][1]};
                return dp[m];
            }
            int k = 1;
            while (step >= k)
            {
                ++ k;
                auto t = dfs(m - k);
                maxv = t.fi;
                step = t.se;
            }

            if (maxv + questions[m - 1][0] > last.fi)
                dp[m] = {maxv + questions[m - 1][0], questions[m - 1][1]};
            else
                dp[m] = {last.fi, last.se - 1};
            return dp[m];
        };

        dfs(n);
        
        for (int i = 0; i <= n; ++ i)
            cout << dp[i].fi << " " << dp[i].se << endl;

        return dp[n].fi;
    }
};
```

ä¸Šè¿°ä»£ç çš„ä¸æ­£ç¡®æ€§å°±åœ¨äºï¼šéå†åˆ° `i` ï¼Œå¹¶ä¸”å†³å®šè§£å†³ `i` ï¼Œé‚£ä¹ˆæˆ‘å¾€å‰èµ°ï¼Œçœ‹çœ‹é€‰ `i` çš„æƒ…å†µä¸‹ï¼Œä¹‹å‰é¡¶å¤šèƒ½é€‰å¤šå°‘ `j (j <= i)`ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œæ›´æ–°å…¬å¼ `f[i] = max(f[j] + q[i], f[i - 1])` è¡¨ç¤ºçš„æ˜¯ï¼Œåœ¨è§£å†³æœ¬é¢˜å’Œä¸è§£å†³æœ¬é¢˜é—´å–æœ€å¤§å€¼ã€‚

**è¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œç”¨ `f[j] + q[i]` æ ¹æœ¬æ— æ³•è¡¨ç¤ºé€‰æ‹©è§£å†³ i çš„æƒ…å†µä¸‹çš„æœ€ä¼˜ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºé€‰æ‹©è§£å†³ i ï¼Œå¹¶ä¸ä¸€å®šè¦ä¸ j ç›¸åŠ ï¼Œå¯èƒ½ `f[i-1]` ä¸­ä¹Ÿæ²¡æœ‰å»è§£å†³ i-1 è¿™ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯è§£å†³äº† i-2 è¿™ä¸ªé—®é¢˜ï¼Œä¸”è¿™ä¸ªé—®é¢˜çš„æ­¥é•¿åªæœ‰ä¸€æ­¥ï¼Œå¯ä»¥ç”¨ `f[i-1]+q[i]`æ¥è¡¨ç¤ºè§£å†³ i ä¸‹çš„æœ€ä¼˜ã€‚**

æ‰€ä»¥è¿™é‡Œï¼Œè½¬ç§»å…¬å¼æ ¹æœ¬å°±æ˜¯ä¸å¯¹çš„ã€‚

```
æ­£ç¡®ï¼š
[[3,2],[4,3],[4,4],[2,5]]
[[1,1],[2,2],[3,3],[4,4],[5,5]]
è¾“å‡ºï¼š
5
7

é”™è¯¯ï¼š
[[21,2],[1,2],[12,5],[7,2],[35,3],[32,2],[80,2],[91,5],[92,3],[27,3],[19,1],[37,3],[85,2],[33,4],[25,1],[91,4],[44,3],[93,3],[65,4],[82,3],[85,5],[81,3],[29,2],[25,1],[74,2],[58,1],[85,1],[84,2],[27,2],[47,5],[48,4],[3,2],[44,3],[60,5],[19,2],[9,4],[29,5],[15,3],[1,3],[60,2],[63,3],[79,3],[19,1],[7,1],[35,1],[55,4],[1,4],[41,1],[58,5]]
è¾“å‡ºï¼š737
é¢„æœŸï¼š781
```

æ­£ç¡®æ€è·¯å‚è€ƒçµä½¬ï¼Œä»¥åéƒ½ä¸å¤šè¯´äº†ï¼Œæ²¡æŒ‡æ˜å‡ºå¤„ï¼Œè¯´çš„å°±æ˜¯ä»–ï¼š[endlesscheng](https://leetcode-cn.com/problems/solving-questions-with-brainpower/solution/dao-xu-dp-by-endlesscheng-2qkc/)ã€‚

**è§£æ³•ä¸€ï¼šå€’åº DPï¼ˆæŸ¥è¡¨æ³•ï¼‰**

è®¾æœ‰ $n$ ä¸ªé—®é¢˜ï¼Œå®šä¹‰ $f[i]$ è¡¨ç¤ºè§£å†³åŒºé—´ $[i,n-1]$ å†…çš„é—®é¢˜å¯ä»¥è·å¾—çš„æœ€é«˜åˆ†æ•°ã€‚

å€’åºéå†é—®é¢˜åˆ—è¡¨ï¼Œå¯¹äºç¬¬ $i$ ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å†³ç­–ï¼šè·³è¿‡æˆ–è§£å†³ã€‚

- è‹¥è·³è¿‡ï¼Œåˆ™æœ‰ $f[i]=f[i+1]$ã€‚
- è‹¥è§£å†³ï¼Œåˆ™éœ€è¦è·³è¿‡åç»­ $\textit{brainpower}[i]$ ä¸ªé—®é¢˜ã€‚è®° $j=i+\textit{brainpower}[i]+1$ ï¼Œåˆ™æœ‰

$$
f[i] = \begin{cases} \textit{point}[i]+f[j],&j<n\\ \textit{point}[i],&j\ge n \end{cases}
$$

è¿™ä¸¤ç§å†³ç­–å–æœ€å¤§å€¼ã€‚

æœ€åç­”æ¡ˆä¸º $f[0]$ã€‚

```cpp
class Solution {
public:
    long long mostPoints(vector<vector<int>>& questions) {
        int n = questions.size();
        vector<long long> f(n + 1, 0);
        for (int i = n - 1; i >= 0; -- i)
        {
            auto &q = questions[i];
            int j = i + q[1] + 1;
            f[i] = max(f[i + 1], q[0] + (j >= n ? 0 : f[j]));
        }
        return f[0];
    }
};
```

**è§£æ³•äºŒï¼šæ­£åº DPï¼ˆåˆ·è¡¨æ³•ï¼‰**

å®šä¹‰ $f[i]$ è¡¨ç¤ºè§£å†³åŒºé—´ $[0,i]$ å†…çš„é—®é¢˜å¯ä»¥è·å¾—çš„æœ€é«˜åˆ†æ•°ã€‚

å¯¹äºé—®é¢˜ $i$ï¼Œè‹¥è·³è¿‡ï¼Œåˆ™å¯ä»¥æ›´æ–° $f[i+1]=\max(f[i+1],f[i])$ã€‚

è‹¥ä¸è·³è¿‡ï¼Œè®° $j=i+\textit{brainpower}[i]+1$ï¼Œåˆ™å¯ä»¥æ›´æ–° $f[j]=\max(f[j],f[i]+\textit{point}[i])$ã€‚

å¯¹äº i=n-1i=nâˆ’1 å’Œ j\ge njâ‰¥n çš„æƒ…å†µï¼Œä¸ºäº†ç®€åŒ–ä»£ç é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ›´æ–°åˆ° $f[n]$ ä¸­ã€‚

æœ€åç­”æ¡ˆä¸º $f[n]$ã€‚

```cpp
class Solution {
public:
    long long mostPoints(vector<vector<int>>& questions) {
        int n = questions.size();
        vector<long long> f(n + 1, 0);
        for (int i = 0; i < n; ++ i)
        {
            auto &q = questions[i];
            f[i + 1] = max(f[i], f[i + 1]);
            int j = min(q[1] + i + 1, n);
            f[j] = max(q[0] + f[i], f[j]);
        }
        return f[n];
    }
};
```

### 5983. åŒæ—¶è¿è¡Œ N å°ç”µè„‘çš„æœ€é•¿æ—¶é—´ï¼ˆå‡è®¾æ€ç»´+äºŒåˆ†/è´ªå¿ƒï¼‰

![](./images/leetcode-cn.com_contest_weekly-contest-276_problems_maximum-running-time-of-n-computers_.png)

**è§£æ³•ä¸€ï¼šäºŒåˆ†ç­”æ¡ˆ**

å‡è®¾æˆ‘ä»¬å¯ä»¥è®© $n$ å°ç”µè„‘åŒæ—¶è¿è¡Œ $x$ åˆ†é’Ÿï¼Œé‚£ä¹ˆå¯¹äºç”µé‡å¤§äº $x$ çš„ç”µæ± ï¼Œå…¶åªèƒ½è¢«ä½¿ç”¨ $x$ åˆ†é’Ÿã€‚å› æ­¤æ¯ä¸ªç”µæ± çš„ä½¿ç”¨æ—¶é—´ä¸º $\min(\textit{batteries}[i], x)$ï¼Œæˆ‘ä»¬å°†å…¶ç´¯åŠ èµ·æ¥ï¼Œè®°ä½œ $\textit{sum}$ã€‚é‚£ä¹ˆè¦è®© $n$ å°ç”µè„‘åŒæ—¶è¿è¡Œ $x$ åˆ†é’Ÿï¼Œå¿…è¦æ¡ä»¶æ˜¯ $n\cdot x\le \textit{sum}$ã€‚

ä¸‹é¢è¯æ˜è¯¥æ¡ä»¶æ˜¯å……åˆ†çš„ï¼Œå³å½“ $n\cdot x\le \textit{sum}$ æˆç«‹æ—¶ï¼Œå¿…ç„¶å¯ä»¥è®© $n$ å°ç”µè„‘åŒæ—¶è¿è¡Œ $x$ åˆ†é’Ÿã€‚

å¯¹äºç”µé‡ä¸å°äº $x$ çš„ç”µæ± ï¼Œæˆ‘ä»¬å¯ä»¥è®©å…¶ç»™ä¸€å°ç”µè„‘ä¾›ç”µ $x$ åˆ†é’Ÿã€‚ç”±äºä¸€ä¸ªç”µæ± ä¸èƒ½åŒæ—¶ç»™å¤šå°ç”µè„‘ä¾›ç”µï¼Œå› æ­¤è¯¥ç”µæ± è‹¥ç»™ä¸€å°ç”µè„‘ä¾›ç”µ $x$ åˆ†é’Ÿï¼Œé‚£å®ƒå°±ä¸èƒ½ç”¨äºå…¶ä»–ç”µè„‘äº†ã€‚æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ç”µé‡ä¸å°äº $x$ çš„ç”µæ± å„ç»™ä¸€å°ç”µè„‘ä¾›ç”µã€‚

å¯¹äºå…¶ä½™çš„ç”µæ± ï¼Œè®¾å…¶ç”µé‡å’Œä¸º $\textit{sum}'$ï¼Œå‰©ä½™ $n'$ å°ç”µè„‘æœªè¢«ä¾›ç”µã€‚æˆ‘ä»¬å¯ä»¥éšæ„é€‰æ‹©å‰©ä¸‹çš„ç”µæ± ï¼Œä¾›ç»™å‰©ä½™çš„ç¬¬ä¸€å°ç”µè„‘ï¼Œå¤šä½™çš„ç”µæ± ç”µé‡ä¾›ç»™å‰©ä½™çš„ç¬¬äºŒå°ç”µè„‘ï¼Œä¾æ­¤ç±»æ¨ã€‚æ³¨æ„ç”±äºè¿™äº›ç”µæ± çš„ç”µé‡å°äº $x$ï¼ŒæŒ‰ç…§è¿™ç§åšæ³•æ˜¯ä¸ä¼šå‡ºç°åŒä¸€ä¸ªç”µæ± åœ¨åŒä¸€æ—¶é—´ä¾›ç»™å¤šå°ç”µè„‘çš„ã€‚

ç”±äº $\textit{sum}'=\textit{sum}-(n-n')\cdot x$ï¼Œç»“åˆ $n\cdot x\le \textit{sum}$å¯ä»¥å¾—åˆ° $n'\cdot x\le \textit{sum}$ï¼Œè¿™æ„å‘³ç€å‰©ä½™ç”µæ± å¯ä»¥è®©å‰©ä½™ç”µè„‘è¿è¡Œ $x$ åˆ†é’Ÿã€‚å……åˆ†æ€§å¾—è¯ã€‚

å¦‚æœæˆ‘ä»¬å¯ä»¥è®© $n$ å°ç”µè„‘åŒæ—¶è¿è¡Œ $x$ åˆ†é’Ÿï¼Œé‚£ä¹ˆå¿…ç„¶ä¹Ÿå¯ä»¥åŒæ—¶è¿è¡Œä½äº $x$ åˆ†é’Ÿï¼Œå› æ­¤ç­”æ¡ˆæ»¡è¶³å•è°ƒæ€§ï¼Œå¯ä»¥äºŒåˆ†ç­”æ¡ˆï¼Œé€šè¿‡åˆ¤æ–­ $n\cdot x\le \textit{sum}$ æ¥æ±‚è§£ã€‚

```cpp
class Solution {
public:
    long long maxRunTime(int n, vector<int>& batteries) {
        // äºŒåˆ†ï¼Œæ‰¾ç¬¦åˆè¦æ±‚çš„æœ€å¤§çš„ x
        long long l = 0, r = accumulate(batteries.begin(), batteries.end(), 0L);
        while (l < r)
        {
            long long mid = l + r + 1 >> 1, sum = 0;
            for (long long &&b: batteries)
                sum += min(b, mid);
            if (sum >= n * mid) l = mid;
            else r = mid - 1;
        }
        return l;
    }
};
```

**è§£æ³•äºŒï¼šæ’åº + è´ªå¿ƒ**

å—è§£æ³•ä¸€çš„å¯å‘ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºå¦‚ä¸‹è´ªå¿ƒç­–ç•¥ï¼š

è®°ç”µæ± ç”µé‡å’Œä¸º $\textit{sum}$ï¼Œåˆ™è‡³å¤šå¯ä»¥ä¾›ç”µ $x=\lfloor\dfrac{\textit{sum}}{n}\rfloor$ åˆ†é’Ÿã€‚æˆ‘ä»¬å¯¹ç”µæ± ç”µé‡ä»å¤§åˆ°å°æ’åºï¼Œç„¶åä»ç”µé‡æœ€å¤§çš„ç”µæ± å¼€å§‹éå†ï¼š

è‹¥è¯¥ç”µæ± ç”µé‡è¶…è¿‡ $x$ï¼Œåˆ™å°†å…¶ä¾›ç»™ä¸€å°ç”µè„‘ï¼Œé—®é¢˜ç¼©å‡ä¸º $nâˆ’1$ å°ç”µè„‘çš„å­é—®é¢˜ã€‚

è‹¥è¯¥ç”µæ± ç”µé‡ä¸è¶…è¿‡ $x$ï¼Œåˆ™å…¶ä½™ç”µæ± çš„ç”µé‡å‡ä¸è¶…è¿‡ $x$ï¼Œæ­¤æ—¶æœ‰

$$
n\cdot x=n\cdot\lfloor\dfrac{\textit{sum}}{n}\rfloor \le \textit{sum}
$$

æ ¹æ®è§£æ³•ä¸€çš„ç»“è®ºï¼Œè¿™äº›ç”µæ± èƒ½è‡³å¤šä¾›ç”µ $x$ åˆ†é’Ÿã€‚

ç”±äºéšç€é—®é¢˜è§„æ¨¡å‡å°ï¼Œ$x$ ä¸ä¼šå¢åŠ ï¼Œå› æ­¤è‹¥éå†åˆ°ä¸€ä¸ªç”µé‡ä¸è¶…è¿‡ $x$ çš„ç”µæ± æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿”å› $x$ ä½œä¸ºç­”æ¡ˆã€‚

```cpp
class Solution {
public:
    long long maxRunTime(int n, vector<int>& batteries) {
        // è´ªå¿ƒï¼Œå½“æœ€å¤§ç”µæ± ğŸ”‹ä¸è¶³ä»¥æ”¯æŒå•æœºè¿è¡Œæ—¶ï¼ŒæŠŠ sum/n è¿”å›
        long long sum = accumulate(batteries.begin(), batteries.end(), 0L);
        sort(batteries.rbegin(), batteries.rend());
        for (long long &&b: batteries)
        {   // sum / n æ˜¯è€ƒè™‘ n å°ç”µè„‘èƒ½åšæŒå¤šä¹…
            // å¦‚æœ b > sum / n åˆ™ç”µæ±  b é¡¶å¤šç”¨ b è¿™ä¹ˆå¤šç”µé‡ï¼ŒæŠ›å¼ƒä¸çœ‹
            if (b <= sum / n) return sum / n;
            sum -= b;
            n -- ;
        }
        return -1;
    }
};
```
